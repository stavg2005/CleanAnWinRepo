<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>CleanAndWinApp</title>
    <base href="/" />
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="CleanAndWinApp.styles.css" rel="stylesheet" />
</head>

<body>

    <div class="status-bar-safe-area"></div>

    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="_framework/blazor.webview.js" autostart="false"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA8gY0PbmE1EgDjxd-SdIMWWTaQf9Mi7vc&callback=initMap"></script>
    <!--<script>
        function initialize(lat, lng) {
            var latlng = new google.maps.LatLng(lat, lng);
            var options = {
                zoom: 20, center: latlng,
                mapTypeId: google.maps.MapTypeId.SATELLITE
            };
            var map = new google.maps.Map(document.getElementById("map"), options);
        }
      </script>-->
    <
    <!--script>
        function initialize(locations) {
            var mapOptions = {
                zoom: 15,
                center: new google.maps.LatLng(lat, lng), // Default center coordinates
                mapTypeId: google.maps.MapTypeId.SATELLITE
            };

            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            // Add waypoints
            var waypoints = [
                { lat: lat, lng: lng },
                { lat: lat, lng: lng },
                // Add more waypoints as needed
            ];

            // Create a marker for each waypoint
            waypoints.forEach(function (waypoint) {
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(waypoint.lat, waypoint.lng),
                    map: map,
                    title: 'Waypoint'
                });
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>-->

    <script>
        function initialize(locations) {
            var mapOptions = {
                zoom: 15,
                center: new google.maps.LatLng(locations[0].lat, locations[0].lng),
                mapTypeId: google.maps.MapTypeId.SATELLITE
            };

            var map = new google.maps.Map(document.getElementById("map"), mapOptions);

            // Add waypoints
            locations.forEach(function (location) {
                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(location.lat, location.lng),
                    map: map,
                    title: 'Waypoint'
                });

                // You can customize the marker icon, animation, etc. here if needed
            });
        }

        // Serialize C# List to JSON using Razor syntax

        // Call the JavaScript function with the serialized data
    </script>
    <script type="text/javascript">
        window.getDimensions = function () {
            return {
                width: window.innerWidth,
                height: window.innerHeight
            };
        };
    </script>

    <script>
        window.updateProgressExternally = function (value) {
            updateCircularProgressBar(value);
        };
    </script>



    <script>

        function updateCircularProgressBar(value) {
            const progress = document.getElementById("progress");
            const circumference = 2 * Math.PI * progress.r.baseVal.value;
            const targetOffset = circumference - (value / 100) * circumference;

            // Set the initial state with the full circumference
            progress.style.strokeDasharray = `${circumference} ${circumference}`;
            progress.style.strokeDashoffset = circumference;

            // Start the animation
            animate(circumference, targetOffset, performance.now());
        }

        function animate(initialOffset, targetOffset, startTime) {
            const progress = document.getElementById("progress");
            const duration = 1000; // Animation duration in milliseconds (1 second in this example)

            function frame(currentTime) {
                const elapsed = currentTime - startTime;
                const progressPercentage = Math.min(elapsed / duration, 1);
                const currentOffset = initialOffset - progressPercentage * (initialOffset - targetOffset);

                progress.style.strokeDashoffset = currentOffset;

                if (progressPercentage < 1) {
                    requestAnimationFrame((time) => frame(time));
                }
            }

            requestAnimationFrame((time) => frame(time));
        }


    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Simulate a 4-second loading time
            setTimeout(function () {
                // Add a class to hide the loader
                document.getElementById("loader").classList.add("hidden");

                // Remove the class to show the content
                document.getElementById("content").classList.remove("hidden");
            }, 4000);
        });
    </script>
    <script>
        function nextStep() {
            // Add logic to handle the transition to the next step
            var currentStep = document.querySelector('.form-step.active');
            var nextStep = currentStep.nextElementSibling;

            if (nextStep) {
                currentStep.classList.remove('active');
                nextStep.classList.add('active');
            }
        }

        function prevStep() {
            var currentStep = document.querySelector('.form-step.active');
            var prevStep = currentStep.previousElementSibling;

            if (prevStep) {
                currentStep.classList.remove('active');
                prevStep.classList.add('active');
            }
        }
        // Add similar functions for prevStep() and showStep(stepNumber) if not already defined.
    </script>
</body>

</html>